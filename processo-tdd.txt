O que está acontecendo na figura é basicamente um processo de TDD inserido dentro de outro processo. Primeiramente executamos o TDD normalmente para os teste funcionais e seguimos o fluxo esperado, porém quando entramos na parte do escrever codigo minimo ao inves de escrevermos simplesmente o codigo minimo daquela parte, faremos o TDD para os testes de unidade da parte tratada e seguiremos fazendo isso. Outra modificação é que ao fim do TDD dos testes funcionais, verificamos se precisamos refatorar alguma parte do código se sim aplicamos o TDD sobre os teste de unidade daquela parte.